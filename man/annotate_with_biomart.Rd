% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ninetails_annotation.R
\name{annotate_with_biomart}
\alias{annotate_with_biomart}
\title{Annotate ninetails output data with biomaRt}
\usage{
annotate_with_biomart(
  input_data,
  attributes_to_get = c("ensembl_transcript_id", "external_gene_name", "description",
    "transcript_biotype"),
  filters = "ensembl_transcript_id",
  organism = NULL,
  mart_to_use = NULL
)
}
\arguments{
\item{input_data}{Data frame. Tabular output of the ninetails pipeline.
Must contain a column named \code{ensembl_transcript_id_short}.}

\item{attributes_to_get}{Character vector. Annotation attributes to
retrieve from biomaRt. Default:
\code{c("ensembl_transcript_id", "external_gene_name", "description",
"transcript_biotype")}.}

\item{filters}{Character string. Column of the input data frame to match
with the target mart. Default: \code{"ensembl_transcript_id"}.}

\item{organism}{Character string or \code{NULL}. Organism shorthand for
built-in mart presets. Currently available:
\describe{
  \item{\code{"athaliana"}}{\emph{Arabidopsis thaliana} (Ensembl Plants)}
  \item{\code{"hsapiens"}}{\emph{Homo sapiens} (Ensembl)}
  \item{\code{"mmusculus"}}{\emph{Mus musculus} (Ensembl)}
  \item{\code{"scerevisiae"}}{\emph{Saccharomyces cerevisiae}
    (Ensembl Fungi)}
}
Mutually exclusive with \code{mart_to_use}. Default: \code{NULL}.}

\item{mart_to_use}{Mart object or \code{NULL}. A mart object created with
\code{\link[biomaRt]{useMart}} or \code{\link[biomaRt]{useEnsembl}}.
Mutually exclusive with \code{organism}. Default: \code{NULL}.}
}
\value{
A data frame with the original ninetails output data joined with
  the retrieved annotation attributes via left join on transcript IDs.
}
\description{
Retrieves gene-level annotation from Ensembl for transcripts in ninetails
output data. This is a convenience wrapper for \code{\link[biomaRt]{getBM}}
with built-in organism presets and support for custom mart objects.
}
\details{
Requires the \pkg{biomaRt} package version >= 2.40.

Exactly one of \code{organism} or \code{mart_to_use} must be provided.
The two arguments are mutually exclusive; if both are declared the function
throws an error.
}
\section{Acknowledgements}{

Based on PK (smaegol) NanoTail \code{annotate_with_biomart()}:
\url{https://github.com/LRB-IIMCB/nanotail/}.
Many thanks to the NanoTail developer for help and kind advice.
}

\examples{
\dontrun{

# With built-in organism preset
annot <- ninetails::annotate_with_biomart(
  input_data = merged_nonA_tables,
  organism = "mmusculus"
)

# With custom mart object
mart <- biomaRt::useMart(
  biomart = "ENSEMBL_MART_ENSEMBL",
  dataset = "hsapiens_gene_ensembl"
)
annot <- ninetails::annotate_with_biomart(
  input_data = merged_nonA_tables,
  mart_to_use = mart
)

}

}
\seealso{
\code{\link{merge_nonA_tables}} for preparing the input,
\code{\link[biomaRt]{getBM}} for the underlying biomaRt query,
\code{\link[biomaRt]{useMart}} for creating custom mart objects
}
